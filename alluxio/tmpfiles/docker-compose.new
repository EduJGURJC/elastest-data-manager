namenode:
    image: elastest/hadoop:2.8.0
    ports: 
        - "50070:50070"
        - "9000:9000"
    command: hdfs namenode
    hostname: hdfs-namenode

datanode:
    image: elastest/hadoop:2.8.0
    command: hdfs datanode
    ports:
# The host port is randomly assigned by Docker, to allow scaling to multiple DataNodes on the same host
        - "50075"
    links:
        - namenode:hdfs-namenode

secondarynamenode:
    image: elastest/hadoop:2.8.0
    command: hdfs secondarynamenode
    ports:
        - "50091:50090"
    links:
        - namenode:hdfs-namenode

alluxio-master:
    image: elastest/alluxio:1.5.0
    command: master
    environment:
        # - ALLUXIO_MASTER_HOSTNAME=${DOCKER_HOST_IP}
        ALLUXIO_MASTER_HOSTNAME: "alluxio-master"
        - ALLUXIO_UNDERFS_ADDRESS=hdfs://hdfs-namenode:9000
    ports:
        - "50090:50090"
        # - "19999"
        # - "19998"
        # - "30000"
    links:
        - namenode:hdfs-namenode
    volumes:
        - ./underStorage:/underStorage
    # net: "host"
    hostname: master

alluxio-worker:
    image: elastest/alluxio:1.5.0
    command: worker
    environment:
        ALLUXIO_MASTER_HOSTNAME: "alluxio-master"
        # - ALLUXIO_MASTER_HOSTNAME=master
        - ALLUXIO_RAM_FOLDER=/mnt/ramdisk
        - ALLUXIO_WORKER_MEMORY_SIZE=1GB
        - ALLUXIO_UNDERFS_ADDRESS=hdfs://hdfs-namenode:9000
    ports:
        - "19998"
    #     - "50090"
    #     - "29998"
    #     - "29999"
    links:
        - namenode:hdfs-namenode
        - alluxio-master
    volumes:
        - ./underStorage:/underStorage
        - /mnt/ramdisk:/mnt/ramdisk
    # hostname: alluxio-worker
    # net: "host"
